{"version":3,"sources":["webpack:///./src/views/users/Avatar.vue?72eb","webpack:///./src/views/users/Avatar.vue?6e9c","webpack:///src/views/users/Avatar.vue","webpack:///./src/views/users/Avatar.vue?8feb","webpack:///./src/views/users/Avatar.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Avatar_vue_vue_type_style_index_0_id_c86f8fb8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Avatar_vue_vue_type_style_index_0_id_c86f8fb8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","data-validator-form","_v","src","avatar","directives","name","rawName","value","expression","modifiers","trim","lazy","title","required","type","domProps","on","change","$event","target","blur","$forceUpdate","click","updateAvatar","staticRenderFns","Avatarvue_type_script_lang_js_","data","created","user","$store","state","Object","esm_typeof","methods","_this","img","Image","onload","dispatch","$message","show","onerror","users_Avatarvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"kHAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAofE,EAAG,mECAvf,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,qBAAgC,CAAAF,EAAA,OAAYE,YAAA,kCAA6C,CAAAF,EAAA,OAAYE,YAAA,cAAyB,CAAAN,EAAAO,GAAA,GAAAH,EAAA,MAAAA,EAAA,OAA+BI,MAAA,CAAOC,sBAAA,KAA0B,CAAAL,EAAA,OAAYE,YAAA,cAAyB,CAAAF,EAAA,SAAAJ,EAAAU,GAAA,WAAAN,EAAA,OAAAA,EAAA,OAAoDE,YAAA,qBAAAE,MAAA,CAAwCG,IAAAX,EAAAY,cAAkBR,EAAA,OAAgBE,YAAA,cAAyB,CAAAF,EAAA,OAAYE,YAAA,YAAuB,CAAAF,EAAA,SAAcS,WAAA,EAAaC,KAAA,QAAAC,QAAA,oBAAAC,MAAAhB,EAAA,OAAAiB,WAAA,SAAAC,UAAA,CAA2FC,MAAA,EAAAC,MAAA,IAAyB,CAAEN,KAAA,YAAAC,QAAA,uBAAAC,MAAA,CAAwDK,MAAA,QAAgBJ,WAAA,oBAA+BC,UAAA,CAAaI,UAAA,KAAiBhB,YAAA,4BAAAE,MAAA,CAAiDe,KAAA,QAAcC,SAAA,CAAWR,MAAAhB,EAAA,QAAqByB,GAAA,CAAKC,OAAA,SAAAC,GAA0B3B,EAAAY,OAAAe,EAAAC,OAAAZ,MAAAG,QAAsCU,KAAA,SAAAF,GAAyB3B,EAAA8B,qBAAqB1B,EAAA,OAAcE,YAAA,eAAuBF,EAAA,OAAcE,YAAA,cAAyB,CAAAF,EAAA,UAAeE,YAAA,yBAAAE,MAAA,CAA4Ce,KAAA,UAAgBE,GAAA,CAAKM,MAAA/B,EAAAgC,eAA0B,CAAAhC,EAAAU,GAAA,qBACrqCuB,EAAA,YAAoC,IAAAjC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAAA,EAAA,KAAwBE,YAAA,oBAA8BN,EAAAU,GAAA,4BCkCzJwB,iCAAA,CACApB,KAAA,aACAqB,KAFA,WAGA,OACAvB,OAAA,KAIAwB,QARA,WASA,IAAAC,EAAApC,KAAAqC,OAAAC,MAAAF,KAEAA,GAAA,WAAAG,OAAAC,EAAA,KAAAD,CAAAH,KACApC,KAAAW,OAAAyB,EAAAzB,SAGA8B,QAAA,CACAV,aADA,WACA,IAAAW,EAAA1C,KACAW,EAAAX,KAAAW,OAEA,GAAAA,EAAA,CAEA,IAAAgC,EAAA,IAAAC,MAGAD,EAAAE,OAAA,WACAH,EAAAL,OAAAS,SAAA,cAAAnC,WACA+B,EAAAK,SAAAC,KAAA,SAIAL,EAAAM,QAAA,WACAP,EAAAK,SAAAC,KAAA,kBAGAL,EAAAjC,IAAAC,OCrE+VuC,EAAA,0BCQ/VC,EAAgBZ,OAAAa,EAAA,KAAAb,CACdW,EACApD,EACAkC,GACF,EACA,KACA,WACA,MAIAmB,EAAAE,QAAAC,OAAA,aACeC,EAAA,WAAAJ","file":"js/chunk-bb2c9450.824bdf99.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=style&index=0&id=c86f8fb8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=style&index=0&id=c86f8fb8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-md-9 left-col\"},[_c('div',{staticClass:\"panel panel-default padding-md\"},[_c('div',{staticClass:\"panel-body\"},[_vm._m(0),_c('hr'),_c('div',{attrs:{\"data-validator-form\":\"\"}},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"头像预览：\")]),_c('div',[_c('img',{staticClass:\"avatar-preview-img\",attrs:{\"src\":_vm.avatar}})])]),_c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"col-md-8\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim.lazy\",value:(_vm.avatar),expression:\"avatar\",modifiers:{\"trim\":true,\"lazy\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ title: '头像地址' }),expression:\"{ title: '头像地址' }\",modifiers:{\"required\":true}}],staticClass:\"form-control avatar-input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.avatar)},on:{\"change\":function($event){_vm.avatar=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}})]),_c('div',{staticClass:\"clearfix\"})]),_c('div',{staticClass:\"form-group\"},[_c('button',{staticClass:\"btn btn-lg btn-primary\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.updateAvatar}},[_vm._v(\"上传头像\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',[_c('i',{staticClass:\"fa fa-picture-o\"}),_vm._v(\" 请输入头像地址\")])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"col-md-9 left-col\">\n    <div class=\"panel panel-default padding-md\">\n      <div class=\"panel-body\">\n        <h2><i class=\"fa fa-picture-o\"></i> 请输入头像地址</h2>\n        <hr>\n        <div data-validator-form>\n          <div class=\"form-group\">\n            <label>头像预览：</label>\n            <div>\n              <img :src=\"avatar\" class=\"avatar-preview-img\">\n            </div>\n          </div>\n          <div class=\"form-group\">\n            <div class=\"col-md-8\">\n              <!-- lazy 时实同步改变为 change 事件后同步 -->\n              <input\n                v-model.trim.lazy=\"avatar\"\n                v-validator.required=\"{ title: '头像地址' }\"\n                class=\"form-control avatar-input\"\n                type=\"text\"\n              >\n            </div>\n            <div class=\"clearfix\"></div>\n          </div>\n          <div class=\"form-group\">\n            <button type=\"submit\" class=\"btn btn-lg btn-primary\" @click=\"updateAvatar\">上传头像</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'EditAvatar',\n  data() {\n    return {\n      avatar: ''\n    }\n  },\n  // 实例创建完成后，初始化头像值\n  created() {\n    const user = this.$store.state.user;\n\n    if (user && typeof user === 'object') {\n      this.avatar = user.avatar\n    }\n  },\n  methods: {\n    updateAvatar() {\n      const avatar = this.avatar;\n\n      if (avatar) {\n        // 新建一个 Image 的实例\n        let img = new Image();\n\n        // 加载成功时，上传图片\n        img.onload = () => {\n          this.$store.dispatch('updateUser', { avatar });\n          this.$message.show('上传成功')\n        };\n\n        // 加载失败时，只显示一个失败的提示\n        img.onerror = () => {\n          this.$message.show('上传失败', 'danger')\n        };\n\n        img.src = avatar\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.avatar-preview-img { min-width: 200px; min-height: 200px; max-width: 50%;}\n</style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Avatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Avatar.vue?vue&type=template&id=c86f8fb8&scoped=true&\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js&\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Avatar.vue?vue&type=style&index=0&id=c86f8fb8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c86f8fb8\",\n  null\n  \n)\n\ncomponent.options.__file = \"Avatar.vue\"\nexport default component.exports"],"sourceRoot":""}